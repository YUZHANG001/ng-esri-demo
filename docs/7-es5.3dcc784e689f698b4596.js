function _defineProperties(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{a1Zp:function(e,n,t){"use strict";t.r(n);var l=t("kZht"),r=function e(){_classCallCheck(this,e)},i=t("ET8j"),u=t("C9Ky"),a=t("D57K"),o=t("69HR"),s=function(){function e(n){_classCallCheck(this,e),this.map=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.messageEventHandler=this.receiveMessage.bind(this),addEventListener("message",this.messageEventHandler,!1)}},{key:"ngOnDestroy",value:function(){removeEventListener("message",this.messageEventHandler)}},{key:"loadWebSceneToEditor",value:function(){return a.a(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.map.loadWebSceneProperties();case 2:n=e.sent,this.editorEl.nativeElement.contentWindow.postMessage({language:"json",value:JSON.stringify(n,null,"  ")},"*");case 4:case"end":return e.stop()}}),e,this)})))}},{key:"updateWebScene",value:function(){return a.a(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.map.loadWebSceneProperties();case 2:n=e.sent,this.map.sceneView.subscribe((function(e){n.initialViewProperties.viewingMode=e.viewingMode,n.initialViewProperties.viewpoint=e.viewpoint,t.loadWebSceneToEditor()}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"updateSceneView",value:function(){this.editorEl.nativeElement.contentWindow.postMessage("getValue","*")}},{key:"cloneWebScene",value:function(){var e=JSON.stringify(this.webscene);return JSON.parse(e)}},{key:"receiveMessage",value:function(e){var n=this;this.editorEl.nativeElement.src.startsWith(e.origin)&&this.map.sceneView.subscribe((function(t){return a.a(n,void 0,void 0,regeneratorRuntime.mark((function n(){var l,r,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l=JSON.parse(e.data),this.webscene=l,r=this.cloneWebScene(),n.next=6,o.b(r);case 6:i=n.sent,t.map=i,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),alert("\u914d\u7f6e\u9519\u8bef\uff01"),console.error(n.t0);case 13:case"end":return n.stop()}}),n,this,[[0,10]])})))}))}}]),e}(),c=t("1i8C"),b=l.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .code-editor[_ngcontent-%COMP%]{flex:1}"]],data:{}});function d(e){return l.Ib(0,[l.Fb(402653184,1,{editorEl:0}),(e()(),l.qb(1,0,null,null,2,"a",[["class","m-1 text-muted"],["href","https://developers.arcgis.com/javascript/latest/api-reference/"],["target","_blank"]],null,null,null,null,null)),(e()(),l.qb(2,0,null,null,0,"i",[["class","fas fa-info-circle"]],null,null,null,null,null)),(e()(),l.Hb(-1,null,[" ArcGIS JS API Reference"])),(e()(),l.qb(4,0,[[1,0],["editorEl",1]],null,0,"iframe",[["class","code-editor border border-secondary m-1"],["src","https://beginor.github.io/monaco-editor/index.html"]],null,[[null,"load"]],(function(e,n,t){var l=!0;return"load"===n&&(l=!1!==e.component.loadWebSceneToEditor()&&l),l}),null,null)),(e()(),l.qb(5,0,null,null,6,"div",[["class","tools btn-group btn-group-sm m-1"]],null,null,null,null,null)),(e()(),l.qb(6,0,null,null,2,"button",[["class","btn btn-sm btn-outline-secondary"],["type","button"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.updateWebScene()&&l),l}),null,null)),(e()(),l.qb(7,0,null,null,0,"i",[["class","fa fa-fw fa-angle-double-left"]],null,null,null,null,null)),(e()(),l.Hb(-1,null,[" \u66f4\u65b0\u914d\u7f6e "])),(e()(),l.qb(9,0,null,null,2,"button",[["class","btn btn-sm btn-outline-secondary"],["type","button"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.updateSceneView()&&l),l}),null,null)),(e()(),l.qb(10,0,null,null,0,"i",[["class","fa fa-fw fa-angle-double-right"]],null,null,null,null,null)),(e()(),l.Hb(-1,null,[" \u66f4\u65b0\u5730\u56fe "]))],null,null)}var f=l.mb("app-scene-editor-home",s,(function(e){return l.Ib(0,[(e()(),l.qb(0,0,null,null,1,"app-scene-editor-home",[],null,null,null,d,b)),l.pb(1,245760,null,0,s,[c.a],null,null)],(function(e,n){e(n,1,0)}),null)}),{},{},[]),p=t("An66"),h=t("w7wT"),v=t("1VvW"),m=function e(){_classCallCheck(this,e)};t.d(n,"SceneEditorModuleNgFactory",(function(){return g}));var g=l.nb(r,[],(function(e){return l.zb([l.Ab(512,l.j,l.Y,[[8,[i.d,u.a,f]],[3,l.j],l.w]),l.Ab(4608,p.l,p.k,[l.t,[2,p.z]]),l.Ab(1073742336,p.b,p.b,[]),l.Ab(1073742336,h.U,h.U,[]),l.Ab(1073742336,v.o,v.o,[[2,v.t],[2,v.k]]),l.Ab(1073742336,m,m,[]),l.Ab(1073742336,r,r,[]),l.Ab(1024,v.i,(function(){return[[{path:"",component:s}]]}),[])])}))}}]);