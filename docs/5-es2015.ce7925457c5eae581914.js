(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{ZrEh:function(e,n,l){"use strict";l.r(n);var t=l("kZht");class r{}var s=l("ET8j"),u=l("C9Ky"),a=l("1VvW");class i{constructor(){}ngOnInit(){}}var c=t.ob({encapsulation:0,styles:[[""]],data:{}});function o(e){return t.Kb(0,[(e()(),t.qb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t.pb(1,212992,null,0,a.p,[a.b,t.N,t.j,[8,null],t.h],null,null)],function(e,n){e(n,1,0)},null)}function b(e){return t.Kb(0,[(e()(),t.qb(0,0,null,null,1,"app-home",[],null,null,null,o,c)),t.pb(1,114688,null,0,i,[],null,null)],function(e,n){e(n,1,0)},null)}var d=t.mb("app-home",i,b,{},{},[]),p=l("An66");class h{constructor(){}ngOnInit(){}}var m=t.ob({encapsulation:0,styles:[[""]],data:{}});function w(e){return t.Kb(0,[(e()(),t.qb(0,0,null,null,14,"div",[["class","container-fluid"]],null,null,null,null,null)),(e()(),t.qb(1,0,null,null,13,"div",[["class","row mt-5 justify-content-center mx-sm-2 mx-md-0"]],null,null,null,null,null)),(e()(),t.qb(2,0,null,null,12,"div",[["class","col-md-4"]],null,null,null,null,null)),(e()(),t.qb(3,0,null,null,3,"a",[["class","btn btn-outline-success btn-lg btn-block"],["routerLink","map"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,l){var r=!0;return"click"===n&&(r=!1!==t.Cb(e,4).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&r),r},null,null)),t.pb(4,671744,null,0,a.n,[a.k,a.a,p.i],{routerLink:[0,"routerLink"]},null),(e()(),t.qb(5,0,null,null,0,"i",[["class","esri-icon-maps"]],null,null,null,null,null)),(e()(),t.Ib(-1,null,[" Map View "])),(e()(),t.qb(7,0,null,null,3,"a",[["class","btn btn-outline-success btn-lg btn-block"],["routerLink","scene"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,l){var r=!0;return"click"===n&&(r=!1!==t.Cb(e,8).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&r),r},null,null)),t.pb(8,671744,null,0,a.n,[a.k,a.a,p.i],{routerLink:[0,"routerLink"]},null),(e()(),t.qb(9,0,null,null,0,"i",[["class","esri-icon-globe"]],null,null,null,null,null)),(e()(),t.Ib(-1,null,[" Scene View "])),(e()(),t.qb(11,0,null,null,3,"a",[["class","btn btn-outline-success btn-lg btn-block"],["routerLink","scene-editor"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(e,n,l){var r=!0;return"click"===n&&(r=!1!==t.Cb(e,12).onClick(l.button,l.ctrlKey,l.metaKey,l.shiftKey)&&r),r},null,null)),t.pb(12,671744,null,0,a.n,[a.k,a.a,p.i],{routerLink:[0,"routerLink"]},null),(e()(),t.qb(13,0,null,null,0,"i",[["class","esri-icon-edit"]],null,null,null,null,null)),(e()(),t.Ib(-1,null,[" Scene Editor "]))],function(e,n){e(n,4,0,"map"),e(n,8,0,"scene"),e(n,12,0,"scene-editor")},function(e,n){e(n,3,0,t.Cb(n,4).target,t.Cb(n,4).href),e(n,7,0,t.Cb(n,8).target,t.Cb(n,8).href),e(n,11,0,t.Cb(n,12).target,t.Cb(n,12).href)})}function y(e){return t.Kb(0,[(e()(),t.qb(0,0,null,null,1,"app-dashboard",[],null,null,null,w,m)),t.pb(1,114688,null,0,h,[],null,null)],function(e,n){e(n,1,0)},null)}var f=t.mb("app-dashboard",h,y,{},{},[]),g=l("D57K"),v=l("sCFI");function M(e){return g.a(this,void 0,void 0,function(){var n;return g.b(this,function(l){switch(l.label){case 0:return[4,C(e)];case 1:return l.sent(),[4,Object(v.loadModules)(["esri/Map"])];case 2:return n=l.sent()[0],[4,C(e)];case 3:return l.sent(),[2,new n(e)]}})})}function O(e){return g.a(this,void 0,void 0,function(){return g.b(this,function(n){switch(n.label){case 0:return[4,Object(v.loadModules)(["esri/views/SceneView"])];case 1:return[2,new(0,n.sent()[0])(e)]}})})}function k(e){return g.a(this,void 0,void 0,function(){return g.b(this,function(n){switch(n.label){case 0:return[4,C(e)];case 1:return n.sent(),[4,Object(v.loadModules)(["esri/WebScene"])];case 2:return[2,new(0,n.sent()[0])(e)]}})})}function C(e){return g.a(this,void 0,void 0,function(){var n,l,t,r,s;return g.b(this,function(u){switch(u.label){case 0:return e.layers?(n=e,[4,L(e.layers)]):[3,2];case 1:n.layers=u.sent(),u.label=2;case 2:return e.basemap&&"string"!=typeof e.basemap?(t=l=e.basemap,[4,L(l.baseLayers)]):[3,4];case 3:t.baseLayers=u.sent(),u.label=4;case 4:return e.ground&&"string"!=typeof e.ground?(s=r=e.ground,[4,L(r.layers)]):[3,6];case 5:s.layers=u.sent(),u.label=6;case 6:return[2]}})})}function L(e){return g.a(this,void 0,void 0,function(){var n,l,t,r;return g.b(this,function(s){switch(s.label){case 0:n=[],l=0,t=e,s.label=1;case 1:return l<t.length?[4,j(t[l])]:[3,4];case 2:r=s.sent(),n.push(r),s.label=3;case 3:return l++,[3,1];case 4:return[2,n]}})})}function j(e){return g.a(this,void 0,void 0,function(){var n,l,t,r,s,u,a,i,c,o,b,d,p,h,m,w,y,f,M,O,k,C,j,E;return g.b(this,function(g){switch(g.label){case 0:switch(n=e.type,delete e.type,n){case"feature":return[3,1];case"graphics":return[3,3];case"tile":return[3,5];case"web-tile":return[3,7];case"elevation":return[3,9];case"imagery":return[3,11];case"integrated-mesh":return[3,13];case"map-image":return[3,15];case"map-notes":return[3,17];case"point-cloud":return[3,19];case"scene":return[3,21];case"stream":return[3,23];case"vector-tile":return[3,25];case"bing-maps":return[3,27];case"csv":return[3,29];case"georss":return[3,31];case"group":return[3,33];case"kml":return[3,37];case"open-street-map":return[3,39];case"wms":return[3,41];case"wmts":return[3,43]}return[3,45];case 1:return[4,Object(v.loadModules)(["esri/layers/FeatureLayer"])];case 2:return t=g.sent()[0],l=new t(e),[3,46];case 3:return[4,Object(v.loadModules)(["esri/layers/GraphicsLayer"])];case 4:return r=g.sent()[0],l=new r(e),[3,46];case 5:return[4,Object(v.loadModules)(["esri/layers/TileLayer"])];case 6:return s=g.sent()[0],l=new s(e),[3,46];case 7:return[4,Object(v.loadModules)(["esri/layers/WebTileLayer"])];case 8:return u=g.sent()[0],l=new u(e),[3,46];case 9:return[4,Object(v.loadModules)(["esri/layers/ElevationLayer"])];case 10:return a=g.sent()[0],l=new a(e),[3,46];case 11:return[4,Object(v.loadModules)(["esri/layers/ImageryLayer"])];case 12:return i=g.sent()[0],l=new i(e),[3,46];case 13:return[4,Object(v.loadModules)(["esri/layers/IntegratedMeshLayer"])];case 14:return c=g.sent()[0],l=new c(e),[3,46];case 15:return[4,Object(v.loadModules)(["esri/layers/MapImageLayer"])];case 16:return o=g.sent()[0],l=new o(e),[3,46];case 17:return[4,Object(v.loadModules)(["esri/layers/MapNotesLayer"])];case 18:return b=g.sent()[0],l=new b(e),[3,46];case 19:return[4,Object(v.loadModules)(["esri/layers/PointCloudLayer"])];case 20:return d=g.sent()[0],l=new d(e),[3,46];case 21:return[4,Object(v.loadModules)(["esri/layers/SceneLayer"])];case 22:return p=g.sent()[0],l=new p(e),[3,46];case 23:return[4,Object(v.loadModules)(["esri/layers/StreamLayer"])];case 24:return h=g.sent()[0],l=new h(e),[3,46];case 25:return[4,Object(v.loadModules)(["esri/layers/VectorTileLayer"])];case 26:return m=g.sent()[0],l=new m(e),[3,46];case 27:return[4,Object(v.loadModules)(["esri/layers/BingMapsLayer"])];case 28:return w=g.sent()[0],l=new w(e),[3,46];case 29:return[4,Object(v.loadModules)(["esri/layers/CSVLayer"])];case 30:return y=g.sent()[0],l=new y(e),[3,46];case 31:return[4,Object(v.loadModules)(["esri/layers/GeoRSSLayer"])];case 32:return f=g.sent()[0],l=new f(e),[3,46];case 33:return e.layers?(M=e,[4,L(e.layers)]):[3,35];case 34:M.layers=g.sent(),g.label=35;case 35:return[4,Object(v.loadModules)(["esri/layers/GroupLayer"])];case 36:return O=g.sent()[0],l=new O(e),[3,46];case 37:return[4,Object(v.loadModules)(["esri/layers/KMLLayer"])];case 38:return k=g.sent()[0],l=new k(e),[3,46];case 39:return[4,Object(v.loadModules)(["esri/layers/OpenStreetMapLayer"])];case 40:return C=g.sent()[0],l=new C(e),[3,46];case 41:return[4,Object(v.loadModules)(["esri/layers/WMSLayer"])];case 42:return j=g.sent()[0],l=new j(e),[3,46];case 43:return[4,Object(v.loadModules)(["esri/layers/WMTSLayer"])];case 44:return E=g.sent()[0],l=new E(e),[3,46];case 45:throw new Error("Unknown layer type: "+n);case 46:return[2,l]}})})}class E{constructor(e){this.http=e}ngOnInit(){return g.a(this,void 0,void 0,function*(){try{const n=yield M({basemap:"satellite"}),l=yield function(e){return g.a(this,void 0,void 0,function(){return g.b(this,function(n){switch(n.label){case 0:return[4,Object(v.loadModules)(["esri/views/MapView"])];case 1:return[2,new(0,n.sent()[0])(e)]}})})}({container:this.mapElement.nativeElement,map:n,zoom:7,center:{longitude:113.2,latitude:23.4}});this.mapView=l,yield l.when()}catch(e){console.error(e)}})}ngOnDestroy(){}}var A=l("6uGs"),q=t.ob({encapsulation:0,styles:[["div.map[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:100%}"]],data:{}});function x(e){return t.Kb(0,[t.Gb(402653184,1,{mapElement:0}),(e()(),t.qb(1,0,[[1,0],["mapElement",1]],null,0,"div",[["class","map"],["id","map"]],null,null,null,null,null))],null,null)}function S(e){return t.Kb(0,[(e()(),t.qb(0,0,null,null,1,"app-map-view",[],null,null,null,x,q)),t.pb(1,245760,null,0,E,[A.c],null,null)],function(e,n){e(n,1,0)},null)}var V=t.mb("app-map-view",E,S,{},{},[]);class K{constructor(e){this.http=e}ngOnInit(){return g.a(this,void 0,void 0,function*(){try{const n=yield M({basemap:"satellite",ground:"world-elevation"}),l=yield O({container:this.mapElement.nativeElement,map:n,zoom:7,center:{longitude:113.2,latitude:23.4},viewingMode:"local"});this.sceneView=l,yield l.when()}catch(e){console.error(e)}})}ngOnDestroy(){this.sceneView&&this.sceneView.destroy()}}var W=t.ob({encapsulation:0,styles:[["div.map[_ngcontent-%COMP%]{margin:0;padding:0;width:100%;height:100%}"]],data:{}});function T(e){return t.Kb(0,[t.Gb(402653184,1,{mapElement:0}),(e()(),t.qb(1,0,[[1,0],["mapElement",1]],null,0,"div",[["class","map"],["id","map"]],null,null,null,null,null))],null,null)}function I(e){return t.Kb(0,[(e()(),t.qb(0,0,null,null,1,"app-scene-view",[],null,null,null,T,W)),t.pb(1,245760,null,0,K,[A.c],null,null)],function(e,n){e(n,1,0)},null)}var P=t.mb("app-scene-view",K,I,{},{},[]),N=l("w7wT"),_=l("ZTXN"),G=l("bwdy");class J extends _.a{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(e){return this.hasError?(e.error(this.thrownError),G.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),G.a.EMPTY):super._subscribe(e)}next(e){this.hasCompleted||(this.value=e,this.hasNext=!0)}error(e){this.hasCompleted||super.error(e)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}class z{constructor(){this.sceneView=new J,this.initWebScene={basemap:"streets",initialViewProperties:{viewingMode:"global",viewpoint:{}}}}ngOnInit(){this.messageEventHandler=this.receiveMessage.bind(this),window.addEventListener("message",this.messageEventHandler,!1)}ngAfterViewInit(){return g.a(this,void 0,void 0,function*(){const e=this.cloneWebScene(),n=yield k(e);O({container:this.mapEl.nativeElement,map:n}).then(e=>{this.sceneView.next(e),this.sceneView.complete()})})}ngOnDestroy(){window.removeEventListener("message",this.messageEventHandler)}cloneWebScene(){const e=JSON.stringify(this.initWebScene);return JSON.parse(e)}receiveMessage(e){this.editorEl.nativeElement.src.startsWith(e.origin)&&this.sceneView.subscribe(n=>g.a(this,void 0,void 0,function*(){try{const t=JSON.parse(e.data);this.initWebScene=t;const r=this.cloneWebScene(),s=yield k(r);n.map=s}catch(l){alert("\u914d\u7f6e\u9519\u8bef\uff01"),console.error(l)}}))}loadCode(){this.editorEl.nativeElement.contentWindow.postMessage({language:"json",value:JSON.stringify(this.initWebScene,null,"  ")},"*")}updateView(){this.editorEl.nativeElement.contentWindow.postMessage("getValue","*")}updateScene(){this.sceneView.subscribe(e=>{this.initWebScene.initialViewProperties.viewingMode=e.viewingMode,this.initWebScene.initialViewProperties.viewpoint.camera=e.camera,this.loadCode()})}}var F=t.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{width:100%;height:100%;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}[_nghost-%COMP%]   .code-editor[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}[_nghost-%COMP%]   .tools[_ngcontent-%COMP%]{width:48px}[_nghost-%COMP%]   .map-preview[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1}"]],data:{}});function D(e){return t.Kb(0,[t.Gb(402653184,1,{mapEl:0}),t.Gb(402653184,2,{editorEl:0}),(e()(),t.qb(2,0,[[2,0],["editorEl",1]],null,0,"iframe",[["class","code-editor border border-secondary my-2 ml-2 mr-1 d-flex"],["src","https://beginor.github.io/monaco-editor/index.html"]],null,[[null,"load"]],function(e,n,l){var t=!0;return"load"===n&&(t=!1!==e.component.loadCode()&&t),t},null,null)),(e()(),t.qb(3,0,null,null,6,"div",[["class","tools d-flex flex-column align-items-center justify-content-center"]],null,null,null,null,null)),(e()(),t.qb(4,16777216,null,null,2,"button",[["class","btn btn-sm btn-outline-primary mb-2"],["ngbTooltip","\u66f4\u65b0\u5730\u56fe"],["placement","left"],["type","button"]],null,[[null,"click"]],function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.updateView()&&t),t},null,null)),t.pb(5,212992,null,0,N.U,[t.k,t.C,t.q,t.j,t.N,N.V,t.y,p.d,t.h,t.g],{placement:[0,"placement"],ngbTooltip:[1,"ngbTooltip"]},null),(e()(),t.qb(6,0,null,null,0,"i",[["class","fa fa-fw fa-angle-double-right"]],null,null,null,null,null)),(e()(),t.qb(7,16777216,null,null,2,"button",[["class","btn btn-sm btn-outline-primary"],["ngbTooltip","\u66f4\u65b0\u914d\u7f6e"],["placement","left"],["type","button"]],null,[[null,"click"]],function(e,n,l){var t=!0;return"click"===n&&(t=!1!==e.component.updateScene()&&t),t},null,null)),t.pb(8,212992,null,0,N.U,[t.k,t.C,t.q,t.j,t.N,N.V,t.y,p.d,t.h,t.g],{placement:[0,"placement"],ngbTooltip:[1,"ngbTooltip"]},null),(e()(),t.qb(9,0,null,null,0,"i",[["class","fa fa-fw fa-angle-double-left"]],null,null,null,null,null)),(e()(),t.qb(10,0,[[1,0],["mapEl",1]],null,0,"div",[["class","map-preview border border-secondary my-2 mr-2 ml-1"]],null,null,null,null,null))],function(e,n){e(n,5,0,"left","\u66f4\u65b0\u5730\u56fe"),e(n,8,0,"left","\u66f4\u65b0\u914d\u7f6e")},null)}function H(e){return t.Kb(0,[(e()(),t.qb(0,0,null,null,1,"app-scene-editor",[],null,null,null,D,F)),t.pb(1,4440064,null,0,z,[],null,null)],function(e,n){e(n,1,0)},null)}var U=t.mb("app-scene-editor",z,H,{},{},[]),X=l("3kIJ");class Y{}l.d(n,"ArcgisModuleNgFactory",function(){return Z});var Z=t.nb(r,[],function(e){return t.zb([t.Ab(512,t.j,t.Y,[[8,[s.a,s.b,s.f,s.g,s.c,s.d,s.e,u.a,d,f,V,P,U]],[3,t.j],t.w]),t.Ab(4608,p.m,p.l,[t.t,[2,p.A]]),t.Ab(4608,X.h,X.h,[]),t.Ab(4608,N.t,N.t,[t.j,t.q,N.jb,N.u]),t.Ab(1073742336,p.c,p.c,[]),t.Ab(1073742336,N.c,N.c,[]),t.Ab(1073742336,N.f,N.f,[]),t.Ab(1073742336,N.g,N.g,[]),t.Ab(1073742336,N.k,N.k,[]),t.Ab(1073742336,N.l,N.l,[]),t.Ab(1073742336,X.g,X.g,[]),t.Ab(1073742336,X.b,X.b,[]),t.Ab(1073742336,N.q,N.q,[]),t.Ab(1073742336,N.r,N.r,[]),t.Ab(1073742336,N.v,N.v,[]),t.Ab(1073742336,N.z,N.z,[]),t.Ab(1073742336,N.C,N.C,[]),t.Ab(1073742336,N.F,N.F,[]),t.Ab(1073742336,N.I,N.I,[]),t.Ab(1073742336,N.L,N.L,[]),t.Ab(1073742336,N.Q,N.Q,[]),t.Ab(1073742336,N.T,N.T,[]),t.Ab(1073742336,N.W,N.W,[]),t.Ab(1073742336,N.X,N.X,[]),t.Ab(1073742336,N.w,N.w,[]),t.Ab(1073742336,a.o,a.o,[[2,a.t],[2,a.k]]),t.Ab(1073742336,Y,Y,[]),t.Ab(1073742336,r,r,[]),t.Ab(1024,a.i,function(){return[[{path:"",component:i,children:[{path:"",component:h},{path:"map",component:E},{path:"scene",component:K},{path:"scene-editor",component:z}]}]]},[])])})}}]);