(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{a1Zp:function(n,e,l){"use strict";l.r(e);var t=l("kZht");class i{}var o=l("ET8j"),s=l("C9Ky"),u=l("D57K"),a=l("69HR");class r{constructor(n){this.map=n}ngOnInit(){this.messageEventHandler=this.receiveMessage.bind(this),addEventListener("message",this.messageEventHandler,!1)}ngOnDestroy(){removeEventListener("message",this.messageEventHandler)}loadWebSceneToEditor(){return u.a(this,void 0,void 0,(function*(){const n=yield this.map.loadWebSceneProperties();this.editorEl.nativeElement.contentWindow.postMessage({language:"json",value:JSON.stringify(n,null,"  ")},"*")}))}updateWebScene(){return u.a(this,void 0,void 0,(function*(){const n=yield this.map.loadWebSceneProperties();this.map.sceneView.subscribe(e=>{n.initialViewProperties.viewingMode=e.viewingMode,n.initialViewProperties.viewpoint=e.viewpoint,this.loadWebSceneToEditor()})}))}updateSceneView(){this.editorEl.nativeElement.contentWindow.postMessage("getValue","*")}cloneWebScene(){const n=JSON.stringify(this.webscene);return JSON.parse(n)}receiveMessage(n){this.editorEl.nativeElement.src.startsWith(n.origin)&&this.map.sceneView.subscribe(e=>u.a(this,void 0,void 0,(function*(){try{const l=JSON.parse(n.data);this.webscene=l;const t=this.cloneWebScene(),i=yield a.b(t);e.map=i}catch(l){alert("\u914d\u7f6e\u9519\u8bef\uff01"),console.error(l)}})))}}var c=l("1i8C"),b=t.ob({encapsulation:0,styles:[["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .code-editor[_ngcontent-%COMP%]{flex:1}"]],data:{}});function d(n){return t.Ib(0,[t.Fb(402653184,1,{editorEl:0}),(n()(),t.qb(1,0,null,null,2,"a",[["class","m-1 text-muted"],["href","https://developers.arcgis.com/javascript/latest/api-reference/"],["target","_blank"]],null,null,null,null,null)),(n()(),t.qb(2,0,null,null,0,"i",[["class","fas fa-info-circle"]],null,null,null,null,null)),(n()(),t.Hb(-1,null,[" ArcGIS JS API Reference"])),(n()(),t.qb(4,0,[[1,0],["editorEl",1]],null,0,"iframe",[["class","code-editor border border-secondary m-1"],["src","https://beginor.github.io/monaco-editor/index.html"]],null,[[null,"load"]],(function(n,e,l){var t=!0;return"load"===e&&(t=!1!==n.component.loadWebSceneToEditor()&&t),t}),null,null)),(n()(),t.qb(5,0,null,null,6,"div",[["class","tools btn-group btn-group-sm m-1"]],null,null,null,null,null)),(n()(),t.qb(6,0,null,null,2,"button",[["class","btn btn-sm btn-outline-secondary"],["type","button"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.updateWebScene()&&t),t}),null,null)),(n()(),t.qb(7,0,null,null,0,"i",[["class","fa fa-fw fa-angle-double-left"]],null,null,null,null,null)),(n()(),t.Hb(-1,null,[" \u66f4\u65b0\u914d\u7f6e "])),(n()(),t.qb(9,0,null,null,2,"button",[["class","btn btn-sm btn-outline-secondary"],["type","button"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.updateSceneView()&&t),t}),null,null)),(n()(),t.qb(10,0,null,null,0,"i",[["class","fa fa-fw fa-angle-double-right"]],null,null,null,null,null)),(n()(),t.Hb(-1,null,[" \u66f4\u65b0\u5730\u56fe "]))],null,null)}function p(n){return t.Ib(0,[(n()(),t.qb(0,0,null,null,1,"app-scene-editor-home",[],null,null,null,d,b)),t.pb(1,245760,null,0,r,[c.a],null,null)],(function(n,e){n(e,1,0)}),null)}var h=t.mb("app-scene-editor-home",r,p,{},{},[]),f=l("An66"),m=l("w7wT"),v=l("1VvW");class g{}l.d(e,"SceneEditorModuleNgFactory",(function(){return w}));var w=t.nb(i,[],(function(n){return t.zb([t.Ab(512,t.j,t.Y,[[8,[o.d,s.a,h]],[3,t.j],t.w]),t.Ab(4608,f.l,f.k,[t.t,[2,f.z]]),t.Ab(1073742336,f.b,f.b,[]),t.Ab(1073742336,m.U,m.U,[]),t.Ab(1073742336,v.o,v.o,[[2,v.t],[2,v.k]]),t.Ab(1073742336,g,g,[]),t.Ab(1073742336,i,i,[]),t.Ab(1024,v.i,(function(){return[[{path:"",component:r}]]}),[])])}))}}]);